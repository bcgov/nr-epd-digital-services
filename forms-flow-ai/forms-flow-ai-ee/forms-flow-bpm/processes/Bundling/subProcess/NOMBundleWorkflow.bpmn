<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_1rb8wsa" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="5.0.0" modeler:executionPlatform="Camunda Platform" modeler:executionPlatformVersion="7.17.0">
  <bpmn:collaboration id="Collaboration_14e80c3">
    <bpmn:participant id="Participant_1569q03" name="NOM Bundle Workflow" processRef="nom-bundle-workflow-v1" />
  </bpmn:collaboration>
  <bpmn:process id="nom-bundle-workflow-v1" name="NOM Bundle Workflow" isExecutable="true" camunda:versionTag="1">
    <bpmn:laneSet id="LaneSet_0mph3xb">
      <bpmn:lane id="Lane_1nr2dh3" name="SRCO">
        <bpmn:flowNodeRef>Activity_1gjzpac</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Event_01t23k0</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_0truthe</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="Lane_1mfcqjo" name="Client or QualifiedProfessional">
        <bpmn:flowNodeRef>Event_02fettt</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_1ozfgid</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_0yw5we4</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Event_04mee55</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_1g6gqbl</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_0vt72pb</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_1e0i2ru</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="Lane_1xv1agn" name="Site Information Advisor (SIA)">
        <bpmn:flowNodeRef>Activity_06nypz0</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_1pd38qv</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_0nd8s9d</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_1n3rj1g</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_1os7sys</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_123733v</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Event_0ml6v2t</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_06j5m9d</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_0w5t5av</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_15uoiyo</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_040vqyo</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_0ro66yt</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_0p2e6q1</bpmn:flowNodeRef>
      </bpmn:lane>
    </bpmn:laneSet>
    <bpmn:startEvent id="Event_02fettt" name="Submit Form">
      <bpmn:outgoing>Flow_1la2yud</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:scriptTask id="Activity_1ozfgid" name="Set Application Context For BPM" scriptFormat="javascript">
      <bpmn:incoming>Flow_1la2yud</bpmn:incoming>
      <bpmn:incoming>Flow_10r3k9c</bpmn:incoming>
      <bpmn:outgoing>Flow_0unffch</bpmn:outgoing>
      <bpmn:script>var system = java.lang.System;
var submitterEmail= execution.getVariable('hiddenUserEmail');
execution.setVariable('submitterEmail',submitterEmail);
system.out.println ("submitterEmail"+submitterEmail);

var listOwnerEmailAddress=[];
var ownerEmail= execution.getVariable('s3-email');
execution.setVariable('ownerEmail',ownerEmail);
system.out.println ("ownerEmail"+ownerEmail);
listOwnerEmailAddress.push(ownerEmail);

if(submitterEmail !== null &amp;&amp; submitterEmail !== undefined)
{
	listOwnerEmailAddress.push(submitterEmail);
}

var agentEmail= execution.getVariable('s4-email');
execution.setVariable('agentEmail',agentEmail);
system.out.println ("agentEmail"+agentEmail);
listOwnerEmailAddress.push(agentEmail);

var riskclassification = execution.getVariable('riskclassification');
system.out.println ("riskclassification "+riskclassification );
execution.setVariable('riskclassification',riskclassification);
var siteRiskClassification = execution.getVariable('siteRiskClassificationAtTimeOfApplication');
if (siteRiskClassification) {   
    var siteRiskClassificationObj = JSON.parse(siteRiskClassification);
    system.out.println("siteRiskClassification value: " + siteRiskClassificationObj.value);
    execution.setVariable('siteRiskClassificationFromParent', siteRiskClassificationObj.value);
} else {
    system.out.println("siteRiskClassification is undefined or null");
   execution.setVariable('siteRiskClassificationFromParent', '');
}

system.out.println ("formUrl "+execution.getVariable('formUrl'));
execution.setVariable('name','User');
system.out.println ("name "+execution.getVariable('name'));

if(listOwnerEmailAddress.length &gt; 0)
{	
	execution.setVariable('emailTo',JSON.stringify(listOwnerEmailAddress));	
}
execution.setVariable('EmailType','nom');


system.out.println ("emailTo "+execution.getVariable('emailTo'));
execution.setVariable('formName','Notification of Likely or Actual Migration');
execution.setVariable('emailsIdsToProcess',JSON.stringify(listOwnerEmailAddress));

var siteAddress = execution.getVariable('s2-CivicAddress') || "";
var safeSiteId = execution.getVariable('siteIdNumber') || "";
execution.setVariable('serviceType', 'NOM');
execution.setVariable('siteId', safeSiteId || "");
execution.setVariable('siteAddress', siteAddress || "");


var todayVan = java.time.ZonedDateTime
        .now(java.time.ZoneId.of("America/Vancouver"))
        .toLocalDate();

execution.setVariable("applicationSubmittedDate", todayVan.toString());</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:userTask id="Activity_06nypz0" name="Validate Bundle" camunda:candidateGroups="formsflow/formsflow-reviewer/site-information-advisor">
      <bpmn:extensionElements>
        <camunda:taskListener event="create">
          <camunda:script scriptFormat="javascript">task.execution.setVariable('isCssaTeam',false);
</camunda:script>
        </camunda:taskListener>
        <camunda:taskListener class="org.camunda.bpm.extension.hooks.listeners.FormSubmissionListener" event="create" />
        <camunda:taskListener event="complete">
          <camunda:script scriptFormat="javascript">task.execution.setVariable('applicationStatus', task.execution.getVariable('action'));
task.execution.setVariable('deleteReason', "completed");
task.execution.setVariable('userRole','Site Information Advisor');</camunda:script>
        </camunda:taskListener>
        <camunda:taskListener class="org.camunda.bpm.extension.hooks.listeners.ApplicationStateListener" event="complete" />
        <camunda:taskListener class="org.camunda.bpm.extension.hooks.listeners.BPMFormDataPipelineListener" event="complete">
          <camunda:field name="fields">
            <camunda:expression>["applicationId", "applicationStatus"]</camunda:expression>
          </camunda:field>
        </camunda:taskListener>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0gzrwfr</bpmn:incoming>
      <bpmn:incoming>Flow_0oif1h7</bpmn:incoming>
      <bpmn:outgoing>Flow_1ua4w6m</bpmn:outgoing>
      <bpmn:outgoing>Flow_1oam11w</bpmn:outgoing>
      <bpmn:outgoing>Flow_0l71ern</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:callActivity id="Activity_1gjzpac" name="Send Decision Email" camunda:asyncBefore="true" calledElement="common-email-workflow">
      <bpmn:extensionElements>
        <camunda:in variables="all" />
        <camunda:inputOutput>
          <camunda:inputParameter name="category">nom_updated</camunda:inputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0ixmsle</bpmn:incoming>
      <bpmn:outgoing>Flow_1cgcuxz</bpmn:outgoing>
    </bpmn:callActivity>
    <bpmn:sequenceFlow id="Flow_1la2yud" sourceRef="Event_02fettt" targetRef="Activity_1ozfgid">
      <bpmn:extensionElements>
        <camunda:executionListener expression="${execution.setVariable(&#34;applicationStatus&#34;,&#34;New&#34;)}" event="take" />
        <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.BPMFormDataPipelineListener" event="take">
          <camunda:field name="fields">
            <camunda:expression>["applicationId", "applicationStatus"]</camunda:expression>
          </camunda:field>
        </camunda:executionListener>
        <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.ApplicationStateListener" event="take" />
        <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.FormBPMFilteredDataPipelineListener" event="take" />
      </bpmn:extensionElements>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0unffch" name="Owner Submits" sourceRef="Activity_1ozfgid" targetRef="Gateway_0vt72pb" />
    <bpmn:sequenceFlow id="Flow_1ua4w6m" name="Need Info" sourceRef="Activity_06nypz0" targetRef="Gateway_1pd38qv">
      <bpmn:extensionElements>
        <camunda:executionListener event="take">
          <camunda:script scriptFormat="javascript">execution.setVariable('nomBundleStatus', "SIA Returned");</camunda:script>
        </camunda:executionListener>
        <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.BPMFormDataPipelineListener" event="take">
          <camunda:field name="fields">
            <camunda:string>["applicationId", "applicationStatus", "nomBundleStatus"]</camunda:string>
          </camunda:field>
        </camunda:executionListener>
      </bpmn:extensionElements>
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${action == 'Returned'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1oam11w" name="Accepted/Approved" sourceRef="Activity_06nypz0" targetRef="Gateway_15uoiyo">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${action == 'Queued' || action == 'Approved' }</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_115hro3" name="Yes" sourceRef="Gateway_0nd8s9d" targetRef="Activity_123733v">
      <bpmn:extensionElements>
        <camunda:executionListener event="take">
          <camunda:script scriptFormat="javascript">execution.setVariable('bundleUrl', execution.getVariable('formUrl'));</camunda:script>
        </camunda:executionListener>
      </bpmn:extensionElements>
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${riskclassification  != 'exempt'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0x0w3ip" sourceRef="Activity_1os7sys" targetRef="Event_0ml6v2t" />
    <bpmn:sequenceFlow id="Flow_0ixmsle" sourceRef="Activity_0truthe" targetRef="Activity_1gjzpac">
      <bpmn:extensionElements>
        <camunda:executionListener event="take">
          <camunda:script scriptFormat="javascript">
execution.setVariable('formUrl', execution.getVariable('srcrFormUrl'));</camunda:script>
        </camunda:executionListener>
        <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.CombineSubmissionBundleListener" event="take" />
        <camunda:executionListener event="take">
          <camunda:script scriptFormat="javascript">if (action == 'Approved')
{
execution.setVariable("applicationStatus", "Approved");
}
else{
execution.setVariable("applicationStatus", "Rejected");
}</camunda:script>
        </camunda:executionListener>
        <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.ApplicationStateListener" event="take" />
      </bpmn:extensionElements>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_10r3k9c" name="Resubmitted" sourceRef="Activity_1e0i2ru" targetRef="Activity_1ozfgid">
      <bpmn:extensionElements>
        <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.FormBPMFilteredDataPipelineListener" event="take" />
        <camunda:executionListener event="take">
          <camunda:script scriptFormat="javascript">execution.setVariable('applicationStatus', "Resubmitted");
execution.setVariable('nomStatus', "Resubmitted");</camunda:script>
        </camunda:executionListener>
        <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.FormSubmissionListener" event="take" />
        <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.BPMFormDataPipelineListener" event="take">
          <camunda:field name="fields">
            <camunda:expression>["applicationId", "applicationStatus", "nomStatus","hdnAppType","dataGrid","siteIdNumber"]</camunda:expression>
          </camunda:field>
        </camunda:executionListener>
        <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.ApplicationStateListener" event="take" />
      </bpmn:extensionElements>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0l71ern" name="Rejected" sourceRef="Activity_06nypz0" targetRef="Activity_1n3rj1g">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${action == 'Rejected' }</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1xaizis" sourceRef="Gateway_15uoiyo" targetRef="Activity_0w5t5av" />
    <bpmn:sequenceFlow id="Flow_153luo3" sourceRef="Gateway_15uoiyo" targetRef="Activity_1os7sys" />
    <bpmn:sequenceFlow id="Flow_04r78pc" sourceRef="Gateway_1pd38qv" targetRef="Activity_1e0i2ru" />
    <bpmn:sequenceFlow id="Flow_1twoj9j" sourceRef="Gateway_1pd38qv" targetRef="Activity_0p2e6q1" />
    <bpmn:sequenceFlow id="Flow_1cgcuxz" sourceRef="Activity_1gjzpac" targetRef="Event_01t23k0" />
    <bpmn:endEvent id="Event_01t23k0">
      <bpmn:incoming>Flow_1cgcuxz</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:subProcess id="Activity_0truthe" name="SRCR Flow">
      <bpmn:incoming>Flow_1l3pe3s</bpmn:incoming>
      <bpmn:outgoing>Flow_0ixmsle</bpmn:outgoing>
      <bpmn:scriptTask id="Activity_15cbea9" name="Debug Log" scriptFormat="javascript">
        <bpmn:incoming>Flow_1ug59ee</bpmn:incoming>
        <bpmn:incoming>Flow_0agixvg</bpmn:incoming>
        <bpmn:incoming>Flow_12du94k</bpmn:incoming>
        <bpmn:outgoing>Flow_0sob9l8</bpmn:outgoing>
        <bpmn:script>var system = java.lang.System;
system.out.println ("Sent to Caseworker");</bpmn:script>
      </bpmn:scriptTask>
      <bpmn:userTask id="Activity_1voobmv" name="Caseworker Updates Form" camunda:candidateGroups="formsflow/formsflow-reviewer/caseworker">
        <bpmn:extensionElements>
          <camunda:taskListener class="org.camunda.bpm.extension.hooks.listeners.task.FormConnectorListener" event="create">
            <camunda:field name="copyDataIndicator">
              <camunda:expression>Y</camunda:expression>
            </camunda:field>
            <camunda:field name="fields">
              <camunda:expression>["pid","applicationId","process_pid","task_id"]</camunda:expression>
            </camunda:field>
          </camunda:taskListener>
          <camunda:taskListener event="create">
            <camunda:script scriptFormat="javascript">task.execution.setVariable('task_id',task.getId());
task.execution.setVariableLocal('variable1',"srcr");
</camunda:script>
          </camunda:taskListener>
          <camunda:taskListener event="complete">
            <camunda:script scriptFormat="javascript">task.execution.setVariable('requestStatus', task.execution.getVariable('action'));
task.execution.setVariable('requestType', 'SRCR');
task.execution.setVariable('deleteReason', "completed");
task.execution.setVariable('srcrStatus', task.execution.getVariable('action'));
task.execution.setVariable('applicationStatus', task.execution.getVariable('action'));
task.execution.setVariable('userRole','Caseworker');</camunda:script>
          </camunda:taskListener>
          <camunda:properties>
            <camunda:property name="formName" value="srcrBundleForm" />
          </camunda:properties>
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_0sob9l8</bpmn:incoming>
        <bpmn:outgoing>Flow_0jq9w2c</bpmn:outgoing>
      </bpmn:userTask>
      <bpmn:exclusiveGateway id="Gateway_0wyokmr" name="Action Taken">
        <bpmn:incoming>Flow_0ojaeu2</bpmn:incoming>
        <bpmn:outgoing>Flow_1290fsy</bpmn:outgoing>
        <bpmn:outgoing>Flow_06k5uq7</bpmn:outgoing>
        <bpmn:outgoing>Flow_053df1n</bpmn:outgoing>
        <bpmn:outgoing>Flow_1pdsmz6</bpmn:outgoing>
      </bpmn:exclusiveGateway>
      <bpmn:scriptTask id="Activity_15ke6f4" name="Debug Logs" scriptFormat="javascript">
        <bpmn:incoming>Flow_06k5uq7</bpmn:incoming>
        <bpmn:incoming>Flow_1fquz60</bpmn:incoming>
        <bpmn:incoming>Flow_03tdbh3</bpmn:incoming>
        <bpmn:outgoing>Flow_1rgu84x</bpmn:outgoing>
        <bpmn:script>var system = java.lang.System;
system.out.println ("Sent to SDM");</bpmn:script>
      </bpmn:scriptTask>
      <bpmn:userTask id="Activity_026ojgg" name="SDM Updates Form" camunda:candidateGroups="formsflow/formsflow-reviewer/sdm">
        <bpmn:extensionElements>
          <camunda:taskListener class="org.camunda.bpm.extension.hooks.listeners.task.FormConnectorListener" event="create">
            <camunda:field name="copyDataIndicator">
              <camunda:expression>Y</camunda:expression>
            </camunda:field>
            <camunda:field name="fields">
              <camunda:expression>["pid","applicationId","process_pid","task_id"]</camunda:expression>
            </camunda:field>
          </camunda:taskListener>
          <camunda:taskListener event="create">
            <camunda:script scriptFormat="javascript">task.execution.setVariable('task_id',task.getId());

</camunda:script>
          </camunda:taskListener>
          <camunda:taskListener event="complete">
            <camunda:script scriptFormat="javascript">task.execution.setVariable('requestStatus', task.execution.getVariable('action'));
task.execution.setVariable('requestType', 'SRCR');
task.execution.setVariable('deleteReason', "completed");
task.execution.setVariable('srcrStatus', task.execution.getVariable('action'));
task.execution.setVariable('applicationStatus', task.execution.getVariable('action'));
task.execution.setVariable('userRole','Statutory Decision Maker');</camunda:script>
          </camunda:taskListener>
          <camunda:properties>
            <camunda:property name="formName" value="srcrBundleForm" />
          </camunda:properties>
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_1rgu84x</bpmn:incoming>
        <bpmn:outgoing>Flow_1j4ubaw</bpmn:outgoing>
      </bpmn:userTask>
      <bpmn:exclusiveGateway id="Gateway_137ft2z" name="Action Taken">
        <bpmn:incoming>Flow_17jc772</bpmn:incoming>
        <bpmn:outgoing>Flow_0lxylta</bpmn:outgoing>
        <bpmn:outgoing>Flow_073d165</bpmn:outgoing>
        <bpmn:outgoing>Flow_09azht9</bpmn:outgoing>
      </bpmn:exclusiveGateway>
      <bpmn:endEvent id="Event_1c7uleg" name="End Flow">
        <bpmn:incoming>Flow_1290fsy</bpmn:incoming>
        <bpmn:incoming>Flow_0lxylta</bpmn:incoming>
        <bpmn:incoming>Flow_01lxb2e</bpmn:incoming>
      </bpmn:endEvent>
      <bpmn:receiveTask id="Activity_0fgdxru" name="Application Resubmitted" messageRef="Message_0lm44we">
        <bpmn:extensionElements>
          <camunda:executionListener event="start">
            <camunda:script scriptFormat="javascript">execution.setVariable('applicationStatus', "Resubmit");</camunda:script>
          </camunda:executionListener>
          <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.FormSubmissionListener" event="start" />
          <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.BPMFormDataPipelineListener" event="start">
            <camunda:field name="fields">
              <camunda:expression>["applicationId", "applicationStatus", "srcrStatus"]</camunda:expression>
            </camunda:field>
          </camunda:executionListener>
          <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.ApplicationStateListener" event="start" />
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_1pdsmz6</bpmn:incoming>
        <bpmn:outgoing>Flow_1ug59ee</bpmn:outgoing>
      </bpmn:receiveTask>
      <bpmn:receiveTask id="Activity_0aiiz1c" name="Application Resubmitted" messageRef="Message_0lm44we">
        <bpmn:extensionElements>
          <camunda:executionListener event="start">
            <camunda:script scriptFormat="javascript">execution.setVariable('applicationStatus', "Resubmit");</camunda:script>
          </camunda:executionListener>
          <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.FormSubmissionListener" event="start" />
          <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.BPMFormDataPipelineListener" event="start">
            <camunda:field name="fields">
              <camunda:expression>["applicationId", "applicationStatus", "srcrStatus"]</camunda:expression>
            </camunda:field>
          </camunda:executionListener>
          <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.ApplicationStateListener" event="start" />
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_073d165</bpmn:incoming>
        <bpmn:outgoing>Flow_1fquz60</bpmn:outgoing>
      </bpmn:receiveTask>
      <bpmn:scriptTask id="Activity_12sm7v1" name="Debug Log" scriptFormat="javascript">
        <bpmn:incoming>Flow_053df1n</bpmn:incoming>
        <bpmn:incoming>Flow_0wuqkhq</bpmn:incoming>
        <bpmn:incoming>Flow_1f79u4n</bpmn:incoming>
        <bpmn:incoming>Flow_04sl0pt</bpmn:incoming>
        <bpmn:outgoing>Flow_1g0e5n9</bpmn:outgoing>
        <bpmn:script>var system = java.lang.System;
system.out.println ("Begin SRCR Flow - Sent To SRCO");
system.out.println ("isSentFromSociety "+execution.getVariable('isSentFromSociety'));</bpmn:script>
      </bpmn:scriptTask>
      <bpmn:startEvent id="Event_0n8izi0" name="Start SRCR Flow">
        <bpmn:outgoing>Flow_1f79u4n</bpmn:outgoing>
      </bpmn:startEvent>
      <bpmn:userTask id="Activity_0idq8ua" name="SRCO Updates Form" camunda:candidateGroups="formsflow/formsflow-reviewer/site-risk-classification-officer">
        <bpmn:extensionElements>
          <camunda:taskListener class="org.camunda.bpm.extension.hooks.listeners.task.FormConnectorListener" event="create">
            <camunda:field name="copyDataIndicator">
              <camunda:expression>Y</camunda:expression>
            </camunda:field>
            <camunda:field name="fields">
              <camunda:expression>["pid","applicationId","process_pid","task_id"]</camunda:expression>
            </camunda:field>
          </camunda:taskListener>
          <camunda:taskListener event="create">
            <camunda:script scriptFormat="javascript">task.execution.setVariable('task_id',task.getId());
task.execution.setVariableLocal('variable1',"srcr");
</camunda:script>
          </camunda:taskListener>
          <camunda:taskListener event="complete">
            <camunda:script scriptFormat="javascript">task.execution.setVariable('requestStatus', task.execution.getVariable('action'));
task.execution.setVariable('requestType', 'SRCR');
task.execution.setVariable('deleteReason', "completed");
task.execution.setVariable('srcrStatus', task.execution.getVariable('action'));
task.execution.setVariable('applicationStatus', task.execution.getVariable('action'));
task.execution.setVariable('userRole','Site Risk Classification Officer');</camunda:script>
          </camunda:taskListener>
          <camunda:properties>
            <camunda:property name="formName" value="srcrBundleForm" />
          </camunda:properties>
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_1g0e5n9</bpmn:incoming>
        <bpmn:outgoing>Flow_0wzucup</bpmn:outgoing>
      </bpmn:userTask>
      <bpmn:exclusiveGateway id="Gateway_102i3iq" name="Action Taken">
        <bpmn:incoming>Flow_0o1fhdi</bpmn:incoming>
        <bpmn:outgoing>Flow_01lxb2e</bpmn:outgoing>
        <bpmn:outgoing>Flow_1obpc5x</bpmn:outgoing>
        <bpmn:outgoing>Flow_0szkd4s</bpmn:outgoing>
      </bpmn:exclusiveGateway>
      <bpmn:receiveTask id="Activity_0mpunb8" name="Application Resubmitted" messageRef="Message_0lm44we">
        <bpmn:extensionElements>
          <camunda:executionListener event="start">
            <camunda:script scriptFormat="javascript">execution.setVariable('applicationStatus', "Resubmit");</camunda:script>
          </camunda:executionListener>
          <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.FormSubmissionListener" event="start" />
          <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.BPMFormDataPipelineListener" event="start">
            <camunda:field name="fields">
              <camunda:expression>["applicationId", "applicationStatus", "srcrStatus"]</camunda:expression>
            </camunda:field>
          </camunda:executionListener>
          <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.ApplicationStateListener" event="start" />
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_0szkd4s</bpmn:incoming>
        <bpmn:outgoing>Flow_0wuqkhq</bpmn:outgoing>
      </bpmn:receiveTask>
      <bpmn:exclusiveGateway id="Gateway_0ynmdzk" name="Is High Risk Site?">
        <bpmn:incoming>Flow_1obpc5x</bpmn:incoming>
        <bpmn:outgoing>Flow_0agixvg</bpmn:outgoing>
        <bpmn:outgoing>Flow_03tdbh3</bpmn:outgoing>
      </bpmn:exclusiveGateway>
      <bpmn:exclusiveGateway id="Gateway_1hhucce" name="Is High Risk">
        <bpmn:incoming>Flow_09azht9</bpmn:incoming>
        <bpmn:outgoing>Flow_12du94k</bpmn:outgoing>
        <bpmn:outgoing>Flow_04sl0pt</bpmn:outgoing>
      </bpmn:exclusiveGateway>
      <bpmn:sequenceFlow id="Flow_1ug59ee" name="Resubmitted" sourceRef="Activity_0fgdxru" targetRef="Activity_15cbea9">
        <bpmn:extensionElements>
          <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.FormBPMFilteredDataPipelineListener" event="take" />
          <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.FormSubmissionListener" event="take" />
          <camunda:executionListener event="take">
            <camunda:script scriptFormat="javascript">execution.setVariable('applicationStatus', "Resubmitted");
execution.setVariable('requestStatus', "Resubmitted");
execution.setVariable('srcrStatus', "Resubmitted");</camunda:script>
          </camunda:executionListener>
          <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.BPMFormDataPipelineListener" event="take">
            <camunda:field name="fields">
              <camunda:expression>["applicationId", "applicationStatus", "srcrStatus"]</camunda:expression>
            </camunda:field>
          </camunda:executionListener>
          <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.ApplicationStateListener" event="take" />
          <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.RequestStateListener" event="take" />
        </bpmn:extensionElements>
      </bpmn:sequenceFlow>
      <bpmn:sequenceFlow id="Flow_0agixvg" name="No" sourceRef="Gateway_0ynmdzk" targetRef="Activity_15cbea9">
        <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${siteRiskClassificationFromParent== 'nonHighRisk'}</bpmn:conditionExpression>
      </bpmn:sequenceFlow>
      <bpmn:sequenceFlow id="Flow_12du94k" name="No" sourceRef="Gateway_1hhucce" targetRef="Activity_15cbea9">
        <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${siteRiskClassificationFromParent== 'notHighRisk' }</bpmn:conditionExpression>
      </bpmn:sequenceFlow>
      <bpmn:sequenceFlow id="Flow_0sob9l8" sourceRef="Activity_15cbea9" targetRef="Activity_1voobmv" />
      <bpmn:sequenceFlow id="Flow_0jq9w2c" sourceRef="Activity_1voobmv" targetRef="Gateway_01ys7kk">
        <bpmn:extensionElements>
          <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.BPMFormDataPipelineListener" event="take">
            <camunda:field name="fields">
              <camunda:expression>["applicationId", "applicationStatus", "srcrStatus"]</camunda:expression>
            </camunda:field>
          </camunda:executionListener>
          <camunda:executionListener event="take">
            <camunda:script scriptFormat="javascript">execution.setVariable('srcrFormUrl', execution.getVariable('formUrl'));</camunda:script>
          </camunda:executionListener>
          <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.CombineSubmissionBundleListener" event="take" />
          <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.RequestStateListener" event="take" />
        </bpmn:extensionElements>
      </bpmn:sequenceFlow>
      <bpmn:sequenceFlow id="Flow_1290fsy" name="Rejected" sourceRef="Gateway_0wyokmr" targetRef="Event_1c7uleg">
        <bpmn:extensionElements>
          <camunda:executionListener event="take">
            <camunda:script scriptFormat="javascript">execution.setVariable('bundleUrl', execution.getVariable('formUrl'));</camunda:script>
          </camunda:executionListener>
        </bpmn:extensionElements>
        <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${action == 'Rejected'}</bpmn:conditionExpression>
      </bpmn:sequenceFlow>
      <bpmn:sequenceFlow id="Flow_06k5uq7" name="Review In Progress" sourceRef="Gateway_0wyokmr" targetRef="Activity_15ke6f4">
        <bpmn:extensionElements>
          <camunda:executionListener event="take">
            <camunda:script scriptFormat="javascript">execution.setVariable('srcrBundleStatus', "srcrCaseworkerAccepted");</camunda:script>
          </camunda:executionListener>
          <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.BPMFormDataPipelineListener" event="take">
            <camunda:field name="fields">
              <camunda:expression>["applicationId", "applicationStatus", "srcrBundleStatus"]</camunda:expression>
            </camunda:field>
          </camunda:executionListener>
        </bpmn:extensionElements>
        <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${action == 'Review In Progress SDM'}</bpmn:conditionExpression>
      </bpmn:sequenceFlow>
      <bpmn:sequenceFlow id="Flow_053df1n" name="Recheck" sourceRef="Gateway_0wyokmr" targetRef="Activity_12sm7v1">
        <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${action == 'Recheck'}</bpmn:conditionExpression>
      </bpmn:sequenceFlow>
      <bpmn:sequenceFlow id="Flow_1pdsmz6" name="Returned" sourceRef="Gateway_0wyokmr" targetRef="Activity_0fgdxru">
        <bpmn:extensionElements>
          <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.ApplicationStateListener" event="take" />
        </bpmn:extensionElements>
        <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${action == 'Returned' }</bpmn:conditionExpression>
      </bpmn:sequenceFlow>
      <bpmn:sequenceFlow id="Flow_1fquz60" name="Resubmitted" sourceRef="Activity_0aiiz1c" targetRef="Activity_15ke6f4">
        <bpmn:extensionElements>
          <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.FormBPMFilteredDataPipelineListener" event="take" />
          <camunda:executionListener event="take">
            <camunda:script scriptFormat="javascript">execution.setVariable('applicationStatus', "Resubmitted");
execution.setVariable('requestStatus', "Resubmitted");
execution.setVariable('srcrStatus', "Resubmitted");</camunda:script>
          </camunda:executionListener>
          <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.FormSubmissionListener" event="take" />
          <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.BPMFormDataPipelineListener" event="take">
            <camunda:field name="fields">
              <camunda:expression>["applicationId", "applicationStatus", "srcrStatus"]</camunda:expression>
            </camunda:field>
          </camunda:executionListener>
          <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.ApplicationStateListener" event="take" />
          <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.RequestStateListener" event="take" />
        </bpmn:extensionElements>
      </bpmn:sequenceFlow>
      <bpmn:sequenceFlow id="Flow_03tdbh3" name="Yes" sourceRef="Gateway_0ynmdzk" targetRef="Activity_15ke6f4">
        <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${siteRiskClassificationFromParent!= 'nonHighRisk'}</bpmn:conditionExpression>
      </bpmn:sequenceFlow>
      <bpmn:sequenceFlow id="Flow_1rgu84x" sourceRef="Activity_15ke6f4" targetRef="Activity_026ojgg" />
      <bpmn:sequenceFlow id="Flow_1j4ubaw" sourceRef="Activity_026ojgg" targetRef="Gateway_1bl74qu">
        <bpmn:extensionElements>
          <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.BPMFormDataPipelineListener" event="take">
            <camunda:field name="fields">
              <camunda:expression>["applicationId", "applicationStatus", "srcrStatus"]</camunda:expression>
            </camunda:field>
          </camunda:executionListener>
          <camunda:executionListener event="take">
            <camunda:script scriptFormat="javascript">execution.setVariable('srcrFormUrl', execution.getVariable('formUrl'));</camunda:script>
          </camunda:executionListener>
        </bpmn:extensionElements>
      </bpmn:sequenceFlow>
      <bpmn:sequenceFlow id="Flow_0lxylta" name="Approved/Rejected" sourceRef="Gateway_137ft2z" targetRef="Event_1c7uleg">
        <bpmn:extensionElements>
          <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.CombineSubmissionBundleListener" event="take" />
          <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.RequestStateListener" event="take" />
          <camunda:executionListener event="take">
            <camunda:script scriptFormat="javascript">execution.setVariable('bundleUrl', execution.getVariable('formUrl'));</camunda:script>
          </camunda:executionListener>
        </bpmn:extensionElements>
        <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${action == 'Outcome Decision Made - Satisfactory' or action == 'Outcome Decision Made - Unsatisfactory' }</bpmn:conditionExpression>
      </bpmn:sequenceFlow>
      <bpmn:sequenceFlow id="Flow_073d165" name="Returned" sourceRef="Gateway_137ft2z" targetRef="Activity_0aiiz1c">
        <bpmn:extensionElements>
          <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.CombineSubmissionBundleListener" event="take" />
          <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.RequestStateListener" event="take" />
          <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.ApplicationStateListener" event="take" />
        </bpmn:extensionElements>
        <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${action == 'Returned' }</bpmn:conditionExpression>
      </bpmn:sequenceFlow>
      <bpmn:sequenceFlow id="Flow_09azht9" name="Recheck" sourceRef="Gateway_137ft2z" targetRef="Gateway_1hhucce">
        <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${action == 'Recheck' }</bpmn:conditionExpression>
      </bpmn:sequenceFlow>
      <bpmn:sequenceFlow id="Flow_01lxb2e" name="Rejected" sourceRef="Gateway_102i3iq" targetRef="Event_1c7uleg">
        <bpmn:extensionElements>
          <camunda:executionListener event="take">
            <camunda:script scriptFormat="javascript">execution.setVariable('bundleUrl', execution.getVariable('formUrl'));</camunda:script>
          </camunda:executionListener>
        </bpmn:extensionElements>
        <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${action == 'Rejected' }</bpmn:conditionExpression>
      </bpmn:sequenceFlow>
      <bpmn:sequenceFlow id="Flow_0wuqkhq" name="Resubmitted" sourceRef="Activity_0mpunb8" targetRef="Activity_12sm7v1">
        <bpmn:extensionElements>
          <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.FormBPMFilteredDataPipelineListener" event="take" />
          <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.FormSubmissionListener" event="take" />
          <camunda:executionListener event="take">
            <camunda:script scriptFormat="javascript">execution.setVariable('applicationStatus', "Resubmitted");
execution.setVariable('requestStatus', "Resubmitted");
execution.setVariable('srcrStatus', "Resubmitted");</camunda:script>
          </camunda:executionListener>
          <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.BPMFormDataPipelineListener" event="take">
            <camunda:field name="fields">
              <camunda:expression>["applicationId", "applicationStatus", "srcrStatus"]</camunda:expression>
            </camunda:field>
          </camunda:executionListener>
          <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.ApplicationStateListener" event="take" />
          <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.RequestStateListener" event="take" />
        </bpmn:extensionElements>
      </bpmn:sequenceFlow>
      <bpmn:sequenceFlow id="Flow_1f79u4n" sourceRef="Event_0n8izi0" targetRef="Activity_12sm7v1">
        <bpmn:extensionElements>
          <camunda:executionListener event="take">
            <camunda:script scriptFormat="javascript">execution.setVariable('requestStatus', 'New');
execution.setVariable('requestType', 'SRCR');</camunda:script>
          </camunda:executionListener>
          <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.RequestStateListener" event="take" />
        </bpmn:extensionElements>
      </bpmn:sequenceFlow>
      <bpmn:sequenceFlow id="Flow_04sl0pt" name="Yes" sourceRef="Gateway_1hhucce" targetRef="Activity_12sm7v1">
        <bpmn:extensionElements>
          <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.CombineSubmissionBundleListener" event="take" />
          <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.RequestStateListener" event="take" />
        </bpmn:extensionElements>
        <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${siteRiskClassificationFromParent!= 'notHighRisk' }</bpmn:conditionExpression>
      </bpmn:sequenceFlow>
      <bpmn:sequenceFlow id="Flow_1g0e5n9" sourceRef="Activity_12sm7v1" targetRef="Activity_0idq8ua" />
      <bpmn:sequenceFlow id="Flow_1obpc5x" name="Review In Progress" sourceRef="Gateway_102i3iq" targetRef="Gateway_0ynmdzk">
        <bpmn:extensionElements>
          <camunda:executionListener event="take">
            <camunda:script scriptFormat="javascript">execution.setVariable('srcrBundleStatus', "srcrSrcoAccepted");</camunda:script>
          </camunda:executionListener>
          <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.BPMFormDataPipelineListener" event="take">
            <camunda:field name="fields">
              <camunda:expression>["applicationId", "applicationStatus", "srcrBundleStatus"]</camunda:expression>
            </camunda:field>
          </camunda:executionListener>
        </bpmn:extensionElements>
        <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${action == 'Review In Progress'}</bpmn:conditionExpression>
      </bpmn:sequenceFlow>
      <bpmn:sequenceFlow id="Flow_0szkd4s" name="Returned" sourceRef="Gateway_102i3iq" targetRef="Activity_0mpunb8">
        <bpmn:extensionElements>
          <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.ApplicationStateListener" event="take" />
        </bpmn:extensionElements>
        <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${action == 'Returned' }</bpmn:conditionExpression>
      </bpmn:sequenceFlow>
      <bpmn:sequenceFlow id="Flow_0ojaeu2" sourceRef="Gateway_01ys7kk" targetRef="Gateway_0wyokmr">
        <bpmn:extensionElements />
      </bpmn:sequenceFlow>
      <bpmn:sequenceFlow id="Flow_17jc772" sourceRef="Gateway_1bl74qu" targetRef="Gateway_137ft2z" />
      <bpmn:sequenceFlow id="Flow_0o1fhdi" sourceRef="Gateway_0n1oykh" targetRef="Gateway_102i3iq" />
      <bpmn:sequenceFlow id="Flow_0wzucup" sourceRef="Activity_0idq8ua" targetRef="Gateway_0n1oykh">
        <bpmn:extensionElements>
          <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.BPMFormDataPipelineListener" event="take">
            <camunda:field name="fields">
              <camunda:expression>["applicationId", "applicationStatus", "srcrStatus"]</camunda:expression>
            </camunda:field>
          </camunda:executionListener>
          <camunda:executionListener event="take">
            <camunda:script scriptFormat="javascript">execution.setVariable('srcrFormUrl', execution.getVariable('formUrl'));</camunda:script>
          </camunda:executionListener>
          <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.CombineSubmissionBundleListener" event="take" />
          <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.RequestStateListener" event="take" />
        </bpmn:extensionElements>
      </bpmn:sequenceFlow>
      <bpmn:parallelGateway id="Gateway_0n1oykh" camunda:asyncAfter="true">
        <bpmn:incoming>Flow_0wzucup</bpmn:incoming>
        <bpmn:outgoing>Flow_0o1fhdi</bpmn:outgoing>
        <bpmn:outgoing>Flow_0wuyk5q</bpmn:outgoing>
      </bpmn:parallelGateway>
      <bpmn:parallelGateway id="Gateway_01ys7kk" camunda:asyncAfter="true">
        <bpmn:incoming>Flow_0jq9w2c</bpmn:incoming>
        <bpmn:outgoing>Flow_0ojaeu2</bpmn:outgoing>
        <bpmn:outgoing>Flow_0s3yccc</bpmn:outgoing>
      </bpmn:parallelGateway>
      <bpmn:parallelGateway id="Gateway_1bl74qu" camunda:asyncAfter="true">
        <bpmn:incoming>Flow_1j4ubaw</bpmn:incoming>
        <bpmn:outgoing>Flow_17jc772</bpmn:outgoing>
        <bpmn:outgoing>Flow_03ti4c1</bpmn:outgoing>
      </bpmn:parallelGateway>
      <bpmn:endEvent id="Event_0w3daso">
        <bpmn:incoming>Flow_117fny8</bpmn:incoming>
      </bpmn:endEvent>
      <bpmn:sequenceFlow id="Flow_117fny8" sourceRef="Activity_05x4sl7" targetRef="Event_0w3daso" />
      <bpmn:sequenceFlow id="Flow_0wuyk5q" sourceRef="Gateway_0n1oykh" targetRef="Activity_0kw2jm7" />
      <bpmn:sequenceFlow id="Flow_03ti4c1" sourceRef="Gateway_1bl74qu" targetRef="Activity_0kw2jm7" />
      <bpmn:sequenceFlow id="Flow_0s3yccc" sourceRef="Gateway_01ys7kk" targetRef="Activity_0kw2jm7" />
      <bpmn:callActivity id="Activity_05x4sl7" name="Send Email" calledElement="common-email-workflow">
        <bpmn:extensionElements>
          <camunda:in variables="all" />
          <camunda:inputOutput>
            <camunda:inputParameter name="category">${nom_email_category}</camunda:inputParameter>
          </camunda:inputOutput>
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_0tg9p6g</bpmn:incoming>
        <bpmn:outgoing>Flow_117fny8</bpmn:outgoing>
      </bpmn:callActivity>
      <bpmn:scriptTask id="Activity_0kw2jm7" name="Setting Email Category" scriptFormat="javascript">
        <bpmn:incoming>Flow_0wuyk5q</bpmn:incoming>
        <bpmn:incoming>Flow_0s3yccc</bpmn:incoming>
        <bpmn:incoming>Flow_03ti4c1</bpmn:incoming>
        <bpmn:outgoing>Flow_0tg9p6g</bpmn:outgoing>
        <bpmn:script>var system = java.lang.System;
var emailCategory = 'nom_updated';
execution.setVariable('nom_email_category',emailCategory);
system.out.println ("nom_email_category"+emailCategory);
var applicationStatus = execution.getVariable('action');
system.out.println ("applicationStatus"+applicationStatus);
if (applicationStatus === 'Returned')
{
	emailCategory = 'srs_status_resubmit';
}

execution.setVariable('nom_email_category',emailCategory);
system.out.println ("nom_email_category"+emailCategory);</bpmn:script>
      </bpmn:scriptTask>
      <bpmn:sequenceFlow id="Flow_0tg9p6g" sourceRef="Activity_0kw2jm7" targetRef="Activity_05x4sl7" />
    </bpmn:subProcess>
    <bpmn:exclusiveGateway id="Gateway_0nd8s9d" name="SRCR Exists ?">
      <bpmn:incoming>Flow_00msr8t</bpmn:incoming>
      <bpmn:outgoing>Flow_115hro3</bpmn:outgoing>
      <bpmn:outgoing>Flow_1tvwlrp</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:task id="Activity_1n3rj1g" name="Update Application" camunda:asyncAfter="true">
      <bpmn:extensionElements>
        <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.ApplicationStateListener" event="end" />
        <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.BPMFormDataPipelineListener" event="start" />
        <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.FormSubmissionListener" event="start" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1tvwlrp</bpmn:incoming>
      <bpmn:incoming>Flow_0l71ern</bpmn:incoming>
      <bpmn:outgoing>Flow_0bwxoom</bpmn:outgoing>
    </bpmn:task>
    <bpmn:callActivity id="Activity_1os7sys" name="Send Email" calledElement="common-email-workflow">
      <bpmn:extensionElements>
        <camunda:in variables="all" />
        <camunda:inputOutput>
          <camunda:inputParameter name="category">nom_updated</camunda:inputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0bwxoom</bpmn:incoming>
      <bpmn:incoming>Flow_153luo3</bpmn:incoming>
      <bpmn:outgoing>Flow_0x0w3ip</bpmn:outgoing>
    </bpmn:callActivity>
    <bpmn:sequenceFlow id="Flow_00mjhxs" sourceRef="Activity_0w5t5av" targetRef="Activity_0ro66yt" />
    <bpmn:sequenceFlow id="Flow_04l5mhw" sourceRef="Activity_0ro66yt" targetRef="Activity_040vqyo" />
    <bpmn:sequenceFlow id="Flow_1tvwlrp" name="No" sourceRef="Gateway_0nd8s9d" targetRef="Activity_1n3rj1g">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${riskclassification  == 'exempt'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0bwxoom" sourceRef="Activity_1n3rj1g" targetRef="Activity_1os7sys" />
    <bpmn:sequenceFlow id="Flow_00msr8t" sourceRef="Activity_040vqyo" targetRef="Gateway_0nd8s9d" />
    <bpmn:userTask id="Activity_123733v" name="Assign Reviewers" camunda:candidateGroups="formsflow/formsflow-reviewer/cssa-manager">
      <bpmn:extensionElements>
        <camunda:taskListener event="create">
          <camunda:script scriptFormat="javascript">task.execution.setVariable('isCssaTeam',false);</camunda:script>
        </camunda:taskListener>
        <camunda:taskListener class="org.camunda.bpm.extension.hooks.listeners.FormSubmissionListener" event="create" />
        <camunda:taskListener event="complete">
          <camunda:script scriptFormat="javascript">task.execution.setVariable('applicationStatus', task.execution.getVariable('action'));
task.execution.setVariable('deleteReason', "completed");</camunda:script>
        </camunda:taskListener>
        <camunda:taskListener class="org.camunda.bpm.extension.hooks.listeners.ApplicationStateListener" event="complete" />
        <camunda:taskListener class="org.camunda.bpm.extension.hooks.listeners.BPMFormDataPipelineListener" event="complete">
          <camunda:field name="fields">
            <camunda:expression>["applicationId", "applicationStatus"]</camunda:expression>
          </camunda:field>
        </camunda:taskListener>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_115hro3</bpmn:incoming>
      <bpmn:outgoing>Flow_077ihmr</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="Flow_077ihmr" sourceRef="Activity_123733v" targetRef="Gateway_06j5m9d">
      <bpmn:extensionElements>
        <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.FormBPMFilteredDataPipelineListener" event="take" />
      </bpmn:extensionElements>
    </bpmn:sequenceFlow>
    <bpmn:endEvent id="Event_0ml6v2t" name="End">
      <bpmn:incoming>Flow_0x0w3ip</bpmn:incoming>
      <bpmn:incoming>Flow_16hehuf</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:exclusiveGateway id="Gateway_06j5m9d">
      <bpmn:incoming>Flow_077ihmr</bpmn:incoming>
      <bpmn:outgoing>Flow_1l3pe3s</bpmn:outgoing>
      <bpmn:outgoing>Flow_0gzrwfr</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_1l3pe3s" name="Accepted" sourceRef="Gateway_06j5m9d" targetRef="Activity_0truthe">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${action == 'Review In Progress'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0gzrwfr" name="Recheck" sourceRef="Gateway_06j5m9d" targetRef="Activity_06nypz0">
      <bpmn:extensionElements />
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${action == 'Recheck'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:callActivity id="Activity_0yw5we4" name="Create BC Box Bucket &#38; Notify" calledElement="create-bucket">
      <bpmn:extensionElements>
        <camunda:in variables="all" />
        <camunda:inputOutput>
          <camunda:inputParameter name="category">sds_updated</camunda:inputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_13ehiar</bpmn:incoming>
      <bpmn:outgoing>Flow_1nigg0r</bpmn:outgoing>
    </bpmn:callActivity>
    <bpmn:endEvent id="Event_04mee55">
      <bpmn:incoming>Flow_1nigg0r</bpmn:incoming>
      <bpmn:incoming>Flow_1nbjw65</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_13ehiar" sourceRef="Gateway_1g6gqbl" targetRef="Activity_0yw5we4">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${applicationStatus=='New'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1nigg0r" sourceRef="Activity_0yw5we4" targetRef="Event_04mee55" />
    <bpmn:sequenceFlow id="Flow_1nbjw65" sourceRef="Gateway_1g6gqbl" targetRef="Event_04mee55">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${applicationStatus!='New'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0oif1h7" sourceRef="Gateway_0vt72pb" targetRef="Activity_06nypz0" />
    <bpmn:exclusiveGateway id="Gateway_1g6gqbl">
      <bpmn:incoming>Flow_1qeqv4j</bpmn:incoming>
      <bpmn:outgoing>Flow_13ehiar</bpmn:outgoing>
      <bpmn:outgoing>Flow_1nbjw65</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:parallelGateway id="Gateway_0vt72pb">
      <bpmn:incoming>Flow_0unffch</bpmn:incoming>
      <bpmn:outgoing>Flow_0oif1h7</bpmn:outgoing>
      <bpmn:outgoing>Flow_1qeqv4j</bpmn:outgoing>
    </bpmn:parallelGateway>
    <bpmn:receiveTask id="Activity_1e0i2ru" name="Application Resubmitted" messageRef="Message_0lm44we">
      <bpmn:extensionElements>
        <camunda:executionListener event="start">
          <camunda:script scriptFormat="javascript">execution.setVariable('applicationStatus', "Resubmit");
execution.setVariable('returnedBy', "cssaTeam");</camunda:script>
        </camunda:executionListener>
        <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.FormSubmissionListener" event="start" />
        <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.BPMFormDataPipelineListener" event="start">
          <camunda:field name="fields">
            <camunda:expression>["applicationId", "applicationStatus"]</camunda:expression>
          </camunda:field>
        </camunda:executionListener>
        <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.ApplicationStateListener" event="start" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_04r78pc</bpmn:incoming>
      <bpmn:outgoing>Flow_10r3k9c</bpmn:outgoing>
    </bpmn:receiveTask>
    <bpmn:parallelGateway id="Gateway_1pd38qv" camunda:asyncAfter="true">
      <bpmn:incoming>Flow_1ua4w6m</bpmn:incoming>
      <bpmn:outgoing>Flow_04r78pc</bpmn:outgoing>
      <bpmn:outgoing>Flow_1twoj9j</bpmn:outgoing>
    </bpmn:parallelGateway>
    <bpmn:manualTask id="Activity_0w5t5av" name="Create/check SITE ID in SITE">
      <bpmn:incoming>Flow_1xaizis</bpmn:incoming>
      <bpmn:outgoing>Flow_00mjhxs</bpmn:outgoing>
    </bpmn:manualTask>
    <bpmn:parallelGateway id="Gateway_15uoiyo" camunda:asyncAfter="true">
      <bpmn:incoming>Flow_1oam11w</bpmn:incoming>
      <bpmn:outgoing>Flow_1xaizis</bpmn:outgoing>
      <bpmn:outgoing>Flow_153luo3</bpmn:outgoing>
    </bpmn:parallelGateway>
    <bpmn:manualTask id="Activity_040vqyo" name="Save Files to LAN">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:outputParameter name="Output_3n1bf9q" />
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_04l5mhw</bpmn:incoming>
      <bpmn:outgoing>Flow_00msr8t</bpmn:outgoing>
    </bpmn:manualTask>
    <bpmn:manualTask id="Activity_0ro66yt" name="Update NOM notations in parcels">
      <bpmn:incoming>Flow_00mjhxs</bpmn:incoming>
      <bpmn:outgoing>Flow_04l5mhw</bpmn:outgoing>
    </bpmn:manualTask>
    <bpmn:sequenceFlow id="Flow_1qeqv4j" sourceRef="Gateway_0vt72pb" targetRef="Gateway_1g6gqbl" />
    <bpmn:callActivity id="Activity_0p2e6q1" name="Send Email" calledElement="common-email-workflow">
      <bpmn:extensionElements>
        <camunda:in variables="all" />
        <camunda:inputOutput>
          <camunda:inputParameter name="category">srs_status_resubmit</camunda:inputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1twoj9j</bpmn:incoming>
      <bpmn:outgoing>Flow_16hehuf</bpmn:outgoing>
    </bpmn:callActivity>
    <bpmn:sequenceFlow id="Flow_16hehuf" sourceRef="Activity_0p2e6q1" targetRef="Event_0ml6v2t" />
  </bpmn:process>
  <bpmn:message id="Message_1ngb2eg" name="application_resubmitted" />
  <bpmn:message id="Message_0lm44we" name="application_resubmitted" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_14e80c3">
      <bpmndi:BPMNShape id="Participant_1569q03_di" bpmnElement="Participant_1569q03" isHorizontal="true">
        <dc:Bounds x="130" y="85" width="1269" height="2685" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_1xv1agn_di" bpmnElement="Lane_1xv1agn" isHorizontal="true">
        <dc:Bounds x="160" y="290" width="1239" height="540" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_1mfcqjo_di" bpmnElement="Lane_1mfcqjo" isHorizontal="true">
        <dc:Bounds x="160" y="85" width="1239" height="205" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_1nr2dh3_di" bpmnElement="Lane_1nr2dh3" isHorizontal="true">
        <dc:Bounds x="160" y="830" width="1239" height="1940" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_16hehuf_di" bpmnElement="Flow_16hehuf">
        <di:waypoint x="1030" y="380" />
        <di:waypoint x="1221" y="380" />
        <di:waypoint x="1221" y="660" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1qeqv4j_di" bpmnElement="Flow_1qeqv4j">
        <di:waypoint x="386" y="260" />
        <di:waypoint x="836" y="260" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0oif1h7_di" bpmnElement="Flow_0oif1h7">
        <di:waypoint x="361" y="285" />
        <di:waypoint x="361" y="350" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1nbjw65_di" bpmnElement="Flow_1nbjw65">
        <di:waypoint x="886" y="260" />
        <di:waypoint x="1102" y="260" />
        <di:waypoint x="1102" y="168" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1nigg0r_di" bpmnElement="Flow_1nigg0r">
        <di:waypoint x="911" y="150" />
        <di:waypoint x="1084" y="150" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_13ehiar_di" bpmnElement="Flow_13ehiar">
        <di:waypoint x="861" y="235" />
        <di:waypoint x="861" y="200" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0gzrwfr_di" bpmnElement="Flow_0gzrwfr">
        <di:waypoint x="850" y="795" />
        <di:waypoint x="850" y="820" />
        <di:waypoint x="240" y="820" />
        <di:waypoint x="240" y="410" />
        <di:waypoint x="311" y="410" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="858" y="802" width="44" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1l3pe3s_di" bpmnElement="Flow_1l3pe3s">
        <di:waypoint x="875" y="770" />
        <di:waypoint x="980" y="770" />
        <di:waypoint x="980" y="870" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1045" y="727" width="46" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_077ihmr_di" bpmnElement="Flow_077ihmr">
        <di:waypoint x="751" y="770" />
        <di:waypoint x="825" y="770" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_00msr8t_di" bpmnElement="Flow_00msr8t">
        <di:waypoint x="510" y="710" />
        <di:waypoint x="510" y="680" />
        <di:waypoint x="676" y="680" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0bwxoom_di" bpmnElement="Flow_0bwxoom">
        <di:waypoint x="911" y="680" />
        <di:waypoint x="1001" y="680" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1tvwlrp_di" bpmnElement="Flow_1tvwlrp">
        <di:waypoint x="726" y="680" />
        <di:waypoint x="811" y="680" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="763" y="662" width="15" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_04l5mhw_di" bpmnElement="Flow_04l5mhw">
        <di:waypoint x="411" y="750" />
        <di:waypoint x="460" y="750" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_00mjhxs_di" bpmnElement="Flow_00mjhxs">
        <di:waypoint x="361" y="670" />
        <di:waypoint x="361" y="710" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1cgcuxz_di" bpmnElement="Flow_1cgcuxz">
        <di:waypoint x="670" y="2650" />
        <di:waypoint x="852" y="2650" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1twoj9j_di" bpmnElement="Flow_1twoj9j">
        <di:waypoint x="676" y="380" />
        <di:waypoint x="930" y="380" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_04r78pc_di" bpmnElement="Flow_04r78pc">
        <di:waypoint x="651" y="355" />
        <di:waypoint x="651" y="185" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_153luo3_di" bpmnElement="Flow_153luo3">
        <di:waypoint x="386" y="530" />
        <di:waypoint x="1051" y="530" />
        <di:waypoint x="1051" y="640" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1xaizis_di" bpmnElement="Flow_1xaizis">
        <di:waypoint x="361" y="555" />
        <di:waypoint x="361" y="590" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0l71ern_di" bpmnElement="Flow_0l71ern">
        <di:waypoint x="411" y="420" />
        <di:waypoint x="861" y="420" />
        <di:waypoint x="861" y="640" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="498" y="423" width="44" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_10r3k9c_di" bpmnElement="Flow_10r3k9c">
        <di:waypoint x="601" y="145" />
        <di:waypoint x="411" y="145" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="529" y="133" width="62" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0ixmsle_di" bpmnElement="Flow_0ixmsle">
        <di:waypoint x="620" y="2540" />
        <di:waypoint x="620" y="2610" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0x0w3ip_di" bpmnElement="Flow_0x0w3ip">
        <di:waypoint x="1101" y="680" />
        <di:waypoint x="1203" y="680" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_115hro3_di" bpmnElement="Flow_115hro3">
        <di:waypoint x="701" y="705" />
        <di:waypoint x="701" y="730" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="669" y="701" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1oam11w_di" bpmnElement="Flow_1oam11w">
        <di:waypoint x="361" y="430" />
        <di:waypoint x="361" y="505" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="368" y="465" width="84" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1ua4w6m_di" bpmnElement="Flow_1ua4w6m">
        <di:waypoint x="411" y="380" />
        <di:waypoint x="626" y="380" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="496" y="362" width="49" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0unffch_di" bpmnElement="Flow_0unffch">
        <di:waypoint x="361" y="185" />
        <di:waypoint x="361" y="235" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="282" y="203" width="76" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_180n8hx" bpmnElement="Flow_1la2yud">
        <di:waypoint x="259" y="145" />
        <di:waypoint x="311" y="145" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="BPMNShape_0s7tget" bpmnElement="Event_02fettt">
        <dc:Bounds x="223" y="127" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="210" y="103" width="63" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0zk5qh7" bpmnElement="Activity_1ozfgid">
        <dc:Bounds x="311" y="105" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_12ki2vi" bpmnElement="Activity_06nypz0">
        <dc:Bounds x="311" y="350" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1aljg9k" bpmnElement="Activity_1gjzpac">
        <dc:Bounds x="570" y="2610" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_01t23k0_di" bpmnElement="Event_01t23k0">
        <dc:Bounds x="852" y="2632" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1d2xehj_di" bpmnElement="Activity_0truthe" isExpanded="true">
        <dc:Bounds x="231" y="870" width="978" height="1670" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_0tg9p6g_di" bpmnElement="Flow_0tg9p6g">
        <di:waypoint x="1000" y="1440" />
        <di:waypoint x="1090" y="1440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0s3yccc_di" bpmnElement="Flow_0s3yccc">
        <di:waypoint x="725" y="1820" />
        <di:waypoint x="970" y="1820" />
        <di:waypoint x="970" y="1480" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_03ti4c1_di" bpmnElement="Flow_03ti4c1">
        <di:waypoint x="725" y="2300" />
        <di:waypoint x="980" y="2300" />
        <di:waypoint x="980" y="1480" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0wuyk5q_di" bpmnElement="Flow_0wuyk5q">
        <di:waypoint x="725" y="1190" />
        <di:waypoint x="970" y="1190" />
        <di:waypoint x="970" y="1400" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_117fny8_di" bpmnElement="Flow_117fny8">
        <di:waypoint x="1140" y="1480" />
        <di:waypoint x="1140" y="1632" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_194melp" bpmnElement="Flow_0wzucup">
        <di:waypoint x="700" y="1130" />
        <di:waypoint x="700" y="1165" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0o1fhdi_di" bpmnElement="Flow_0o1fhdi">
        <di:waypoint x="700" y="1215" />
        <di:waypoint x="700" y="1255" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_17jc772_di" bpmnElement="Flow_17jc772">
        <di:waypoint x="700" y="2325" />
        <di:waypoint x="700" y="2355" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0ojaeu2_di" bpmnElement="Flow_0ojaeu2">
        <di:waypoint x="700" y="1845" />
        <di:waypoint x="700" y="1885" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_0sb7ppe" bpmnElement="Flow_0szkd4s">
        <di:waypoint x="725" y="1280" />
        <di:waypoint x="820" y="1280" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="729" y="1263" width="46" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_1xq2l61" bpmnElement="Flow_1obpc5x">
        <di:waypoint x="700" y="1305" />
        <di:waypoint x="700" y="1345" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="648" y="1300" width="49" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_17l8bs6" bpmnElement="Flow_1g0e5n9">
        <di:waypoint x="700" y="1030" />
        <di:waypoint x="700" y="1050" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_1dnxfau" bpmnElement="Flow_04sl0pt">
        <di:waypoint x="920" y="2380" />
        <di:waypoint x="1095" y="2380" />
        <di:waypoint x="1095" y="990" />
        <di:waypoint x="750" y="990" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="995" y="2363" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_0ok2ywv" bpmnElement="Flow_1f79u4n">
        <di:waypoint x="408" y="990" />
        <di:waypoint x="650" y="990" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_0tluqqj" bpmnElement="Flow_0wuqkhq">
        <di:waypoint x="870" y="1240" />
        <di:waypoint x="870" y="990" />
        <di:waypoint x="750" y="990" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="799" y="1108" width="62" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_1h8awae" bpmnElement="Flow_01lxb2e">
        <di:waypoint x="675" y="1280" />
        <di:waypoint x="360" y="1280" />
        <di:waypoint x="360" y="2470" />
        <di:waypoint x="682" y="2470" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="488" y="1263" width="44" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_0kyiglm" bpmnElement="Flow_09azht9">
        <di:waypoint x="725" y="2380" />
        <di:waypoint x="870" y="2380" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="776" y="2362" width="44" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_150pjf9" bpmnElement="Flow_073d165">
        <di:waypoint x="675" y="2380" />
        <di:waypoint x="510" y="2380" />
        <di:waypoint x="510" y="2250" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="570" y="2383" width="46" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_1fjyxi4" bpmnElement="Flow_0lxylta">
        <di:waypoint x="700" y="2405" />
        <di:waypoint x="700" y="2452" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="608" y="2417" width="81" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_1y990bq" bpmnElement="Flow_1j4ubaw">
        <di:waypoint x="700" y="2250" />
        <di:waypoint x="700" y="2275" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_0fgtqfc" bpmnElement="Flow_1rgu84x">
        <di:waypoint x="700" y="2120" />
        <di:waypoint x="700" y="2170" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_0ci2vur" bpmnElement="Flow_03tdbh3">
        <di:waypoint x="675" y="1370" />
        <di:waypoint x="400" y="1370" />
        <di:waypoint x="400" y="2080" />
        <di:waypoint x="650" y="2080" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="584" y="1353" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_1nyny6y" bpmnElement="Flow_1fquz60">
        <di:waypoint x="510" y="2170" />
        <di:waypoint x="510" y="2080" />
        <di:waypoint x="650" y="2080" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="519" y="2133" width="62" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_0mh8fkf" bpmnElement="Flow_1pdsmz6">
        <di:waypoint x="675" y="1910" />
        <di:waypoint x="520" y="1910" />
        <di:waypoint x="520" y="1780" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="467" y="1833" width="46" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_0zhcm98" bpmnElement="Flow_053df1n">
        <di:waypoint x="725" y="1910" />
        <di:waypoint x="1010" y="1910" />
        <di:waypoint x="1010" y="990" />
        <di:waypoint x="750" y="990" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="749" y="1916" width="44" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_1bd5zvk" bpmnElement="Flow_06k5uq7">
        <di:waypoint x="700" y="1935" />
        <di:waypoint x="700" y="2040" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="648" y="1944" width="49" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_0gogwxj" bpmnElement="Flow_1290fsy">
        <di:waypoint x="675" y="1910" />
        <di:waypoint x="360" y="1910" />
        <di:waypoint x="360" y="2470" />
        <di:waypoint x="682" y="2470" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="418" y="1916" width="44" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_1a2p33h" bpmnElement="Flow_0jq9w2c">
        <di:waypoint x="700" y="1760" />
        <di:waypoint x="700" y="1795" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_0jnpngc" bpmnElement="Flow_0sob9l8">
        <di:waypoint x="700" y="1620" />
        <di:waypoint x="700" y="1680" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_1y730qd" bpmnElement="Flow_12du94k">
        <di:waypoint x="895" y="2355" />
        <di:waypoint x="895" y="1580" />
        <di:waypoint x="750" y="1580" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="820" y="1553" width="15" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_07h54tn" bpmnElement="Flow_0agixvg">
        <di:waypoint x="700" y="1395" />
        <di:waypoint x="700" y="1540" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="709" y="1468" width="15" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_0dc3mjp" bpmnElement="Flow_1ug59ee">
        <di:waypoint x="520" y="1700" />
        <di:waypoint x="520" y="1580" />
        <di:waypoint x="650" y="1580" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="529" y="1563" width="62" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="BPMNShape_125m0fx" bpmnElement="Activity_15cbea9">
        <dc:Bounds x="650" y="1540" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1u4r2c4" bpmnElement="Activity_1voobmv">
        <dc:Bounds x="650" y="1680" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0949xd6" bpmnElement="Gateway_0wyokmr" isMarkerVisible="true">
        <dc:Bounds x="675" y="1885" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="619" y="1873" width="63" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0yf3ht9" bpmnElement="Activity_15ke6f4">
        <dc:Bounds x="650" y="2040" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1ej27yw" bpmnElement="Activity_026ojgg">
        <dc:Bounds x="650" y="2170" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0wig7fg" bpmnElement="Gateway_137ft2z" isMarkerVisible="true">
        <dc:Bounds x="675" y="2355" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="619" y="2343" width="63" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1wmz5i4" bpmnElement="Event_1c7uleg">
        <dc:Bounds x="682" y="2452" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="677" y="2503" width="47" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1dmc0md" bpmnElement="Activity_0fgdxru">
        <dc:Bounds x="470" y="1700" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0kr1pn2" bpmnElement="Activity_0aiiz1c">
        <dc:Bounds x="460" y="2170" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1ylfqqc" bpmnElement="Activity_12sm7v1">
        <dc:Bounds x="650" y="950" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0b92zp2" bpmnElement="Event_0n8izi0">
        <dc:Bounds x="372" y="972" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="338" y="953" width="85" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1pcrvrd" bpmnElement="Activity_0idq8ua">
        <dc:Bounds x="650" y="1050" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0h39mam" bpmnElement="Gateway_102i3iq" isMarkerVisible="true">
        <dc:Bounds x="675" y="1255" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="619" y="1233" width="63" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_01bhcfw" bpmnElement="Activity_0mpunb8">
        <dc:Bounds x="820" y="1240" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_12bifp8" bpmnElement="Gateway_0ynmdzk" isMarkerVisible="true">
        <dc:Bounds x="675" y="1345" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="736" y="1363" width="87" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1nmlu4u" bpmnElement="Gateway_1hhucce" isMarkerVisible="true">
        <dc:Bounds x="870" y="2355" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="865" y="2413" width="60" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1edyx7i_di" bpmnElement="Gateway_0n1oykh">
        <dc:Bounds x="675" y="1165" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1jdnskd_di" bpmnElement="Gateway_01ys7kk">
        <dc:Bounds x="675" y="1795" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0wpgtgf_di" bpmnElement="Gateway_1bl74qu">
        <dc:Bounds x="675" y="2275" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0w3daso_di" bpmnElement="Event_0w3daso">
        <dc:Bounds x="1122" y="1632" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_13vg6r4" bpmnElement="Activity_05x4sl7">
        <dc:Bounds x="1090" y="1400" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_11ymku5" bpmnElement="Activity_0kw2jm7">
        <dc:Bounds x="900" y="1400" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0nd8s9d_di" bpmnElement="Gateway_0nd8s9d" isMarkerVisible="true">
        <dc:Bounds x="676" y="655" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="673" y="633" width="74" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1n3rj1g_di" bpmnElement="Activity_1n3rj1g">
        <dc:Bounds x="811" y="640" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_05pbn3y" bpmnElement="Activity_1os7sys">
        <dc:Bounds x="1001" y="640" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1ebb0t4" bpmnElement="Activity_123733v">
        <dc:Bounds x="651" y="730" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0ml6v2t_di" bpmnElement="Event_0ml6v2t">
        <dc:Bounds x="1203" y="662" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1211" y="708" width="20" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_06j5m9d_di" bpmnElement="Gateway_06j5m9d" isMarkerVisible="true">
        <dc:Bounds x="825" y="745" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1fbwq27" bpmnElement="Activity_0yw5we4">
        <dc:Bounds x="811" y="120" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_070x6ba" bpmnElement="Event_04mee55">
        <dc:Bounds x="1084" y="132" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1g6gqbl_di" bpmnElement="Gateway_1g6gqbl" isMarkerVisible="true">
        <dc:Bounds x="836" y="235" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0lh9qc4_di" bpmnElement="Gateway_0vt72pb">
        <dc:Bounds x="336" y="235" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1hbqnlg" bpmnElement="Activity_1e0i2ru">
        <dc:Bounds x="601" y="105" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_165edj8_di" bpmnElement="Gateway_1pd38qv">
        <dc:Bounds x="626" y="355" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_15p2xxo_di" bpmnElement="Activity_0w5t5av">
        <dc:Bounds x="311" y="590" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0up4qy6_di" bpmnElement="Gateway_15uoiyo">
        <dc:Bounds x="336" y="505" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1ny59te" bpmnElement="Activity_040vqyo">
        <dc:Bounds x="460" y="710" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1gxzf5w_di" bpmnElement="Activity_0ro66yt">
        <dc:Bounds x="311" y="710" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0vixqdq" bpmnElement="Activity_0p2e6q1">
        <dc:Bounds x="930" y="340" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
