<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" id="Definitions_17ytju0" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="5.12.0">
  <bpmn:collaboration id="Collaboration_14e80c3">
    <bpmn:participant id="Participant_1tv1lnj" name="CSSA Bundle Worklow" processRef="cssa-bundle-workflow" />
  </bpmn:collaboration>
  <bpmn:process id="cssa-bundle-workflow" name="CSSA Bundle Worklow" isExecutable="true" camunda:versionTag="1">
    <bpmn:laneSet id="LaneSet_1e6v5og">
      <bpmn:lane id="Lane_0kmo9n9" name="Parallel Flow">
        <bpmn:flowNodeRef>Gateway_0uf75ow</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_0vkc1zi</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_1mo5nko</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_1o5uudb</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_0p4hm8r</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Event_0sdygwc</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="Lane_1i2r1qv" name="Society">
        <bpmn:flowNodeRef>Gateway_15p5urd</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_1ao3zkj</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="Lane_1eegye4" name="CSSA Team">
        <bpmn:flowNodeRef>Activity_08ykdar</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_0oobb3z</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="Lane_0bf59ja" name="Approved Professional">
        <bpmn:flowNodeRef>Gateway_04o747e</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_1uc1xs1</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="Lane_0t984kw" name="Client/Submitter">
        <bpmn:flowNodeRef>StartEvent_1</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_0k6ixqm</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_1ozfgid</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_17raw62</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_1v5ffpw</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_08cgufe</bpmn:flowNodeRef>
      </bpmn:lane>
    </bpmn:laneSet>
    <bpmn:startEvent id="StartEvent_1" name="Submit New Application">
      <bpmn:outgoing>Flow_1rc30l8</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:scriptTask id="Activity_0k6ixqm" name="Set Variables" scriptFormat="javascript">
      <bpmn:incoming>Flow_1rc30l8</bpmn:incoming>
      <bpmn:outgoing>Flow_0dbqph3</bpmn:outgoing>
      <bpmn:script>var system = java.lang.System;
system.out.println ("Submit Bundle");
execution.setVariable('isCaseworker',false);
execution.setVariable('isSdm',false);
execution.setVariable('isAp',false);
execution.setVariable('isSociety',false);
execution.setVariable('isCssaTeam',false);</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:scriptTask id="Activity_1ozfgid" name="Set Application Context For BPM" scriptFormat="javascript">
      <bpmn:incoming>Flow_0dbqph3</bpmn:incoming>
      <bpmn:incoming>Flow_1stifo9</bpmn:incoming>
      <bpmn:outgoing>Flow_05pndkl</bpmn:outgoing>
      <bpmn:script>var system = java.lang.System;
var typeOfReview = execution.getVariable('typeOfReview');
system.out.println ("typeOfReview "+typeOfReview);
execution.setVariable('typeOfReview',typeOfReview);
var clientEmail = execution.getVariable('simpleemail');
system.out.println ("clientEmail "+clientEmail);
execution.setVariable('clientEmail',clientEmail);
var siteRiskClassification = execution.getVariable('siteRiskClassification');
system.out.println ("siteRiskClassification "+siteRiskClassification );
execution.setVariable('siteRiskClassification',siteRiskClassification);

var professionalradio = execution.getVariable('Professionalradio');
var owneroperatorradioGroup = execution.getVariable('owneroperatorradioGroup');
var hiddenUserIdForFormSharingApplicantAsOwner = execution.getVariable('hiddenUserIdForFormSharingApplicantAsOwner');
var hiddenUserIdForFormSharingWithDiffOwner = execution.getVariable('hiddenUserIdForFormSharingWithDiffOwner');
var userIdForSharing = '';

system.out.println ("professionalradio "+professionalradio );
system.out.println ("owneroperatorradioGroup "+owneroperatorradioGroup );
system.out.println ("hiddenUserIdForFormSharingApplicantAsOwner"+hiddenUserIdForFormSharingApplicantAsOwner);
system.out.println ("hiddenUserIdForFormSharingWithDiffOwner "+hiddenUserIdForFormSharingWithDiffOwner);

system.out.println(professionalradio == "yes");	
if(professionalradio == "yes")
{
	if(owneroperatorradioGroup == "sameAsApplicant")
	{
		  system.out.println("owneroperatorradioGroup"+hiddenUserIdForFormSharingApplicantAsOwner);	
		  userIdForSharing = hiddenUserIdForFormSharingApplicantAsOwner;

	}
	else
	{
			
		  system.out.println("WithDiffOwner"+hiddenUserIdForFormSharingApplicantAsOwner);	 
		  userIdForSharing = hiddenUserIdForFormSharingApplicantAsOwner;
		
	}
}
system.out.println ("userIdForSharing"+userIdForSharing);
execution.setVariable('professionalradio',professionalradio);
execution.setVariable('userIdForSharing',userIdForSharing);</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:sequenceFlow id="Flow_0drs8s9" name="Accepted" sourceRef="Gateway_0oobb3z" targetRef="Gateway_0uf75ow">
      <bpmn:extensionElements>
        <camunda:executionListener event="take">
          <camunda:script scriptFormat="javascript">execution.setVariable('bundleUrl', execution.getVariable('formUrl'));</camunda:script>
        </camunda:executionListener>
      </bpmn:extensionElements>
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${action == 'Accepted'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1xj96i6" name="No" sourceRef="Gateway_17raw62" targetRef="Gateway_08cgufe">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${applicationStatus!= 'Resubmitted'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_19ktqsm" name="Returned" sourceRef="Gateway_0oobb3z" targetRef="Activity_1v5ffpw">
      <bpmn:extensionElements>
        <camunda:executionListener event="take">
          <camunda:script scriptFormat="javascript">execution.setVariable('isCssaTeam',true);</camunda:script>
        </camunda:executionListener>
      </bpmn:extensionElements>
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${action == 'Returned'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0qbjx6e" name="Rejected" sourceRef="Gateway_0oobb3z" targetRef="Activity_0p4hm8r">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${action == 'Rejected'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1stifo9" name="Resubmitted" sourceRef="Activity_1v5ffpw" targetRef="Activity_1ozfgid">
      <bpmn:extensionElements>
        <camunda:executionListener event="take">
          <camunda:script scriptFormat="javascript">execution.setVariable('applicationStatus', "Resubmitted");</camunda:script>
        </camunda:executionListener>
        <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.BPMFormDataPipelineListener" event="take">
          <camunda:field name="fields">
            <camunda:expression>["applicationId", "applicationStatus"]</camunda:expression>
          </camunda:field>
        </camunda:executionListener>
        <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.ApplicationStateListener" event="take" />
      </bpmn:extensionElements>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1rc30l8" sourceRef="StartEvent_1" targetRef="Activity_0k6ixqm">
      <bpmn:extensionElements>
        <camunda:executionListener expression="${execution.setVariable(&#34;applicationStatus&#34;,&#34;New&#34;)}" event="take" />
        <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.BPMFormDataPipelineListener" event="take">
          <camunda:field name="fields">
            <camunda:expression>["applicationId", "applicationStatus"]</camunda:expression>
          </camunda:field>
        </camunda:executionListener>
        <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.ApplicationStateListener" event="take" />
      </bpmn:extensionElements>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0dbqph3" sourceRef="Activity_0k6ixqm" targetRef="Activity_1ozfgid" />
    <bpmn:sequenceFlow id="Flow_05pndkl" sourceRef="Activity_1ozfgid" targetRef="Gateway_17raw62" />
    <bpmn:exclusiveGateway id="Gateway_17raw62" name="Is Application Resubmitted">
      <bpmn:incoming>Flow_05pndkl</bpmn:incoming>
      <bpmn:outgoing>Flow_1xj96i6</bpmn:outgoing>
      <bpmn:outgoing>Flow_0527h3y</bpmn:outgoing>
      <bpmn:outgoing>Flow_0543g25</bpmn:outgoing>
      <bpmn:outgoing>Flow_0wr0mei</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_1quswsc" name="Yes" sourceRef="Gateway_08cgufe" targetRef="Activity_08ykdar">
      <bpmn:extensionElements>
        <camunda:executionListener event="take">
          <camunda:script scriptFormat="javascript">var system = java.lang.System;
execution.setVariable('isSentFromSociety',false);
system.out.println ("isSentFromSociety "+ execution.getVariable('isSentFromSociety'));</camunda:script>
        </camunda:executionListener>
        <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.FormSubmissionListener" event="take" />
      </bpmn:extensionElements>
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${typeOfReview== 'directToMinistryApplication'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_142lsgk" name="No" sourceRef="Gateway_08cgufe" targetRef="Activity_1uc1xs1">
      <bpmn:extensionElements>
        <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.FormSubmissionListener" event="take" />
      </bpmn:extensionElements>
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${typeOfReview!= 'directToMinistryApplication'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_12uv3km" name="Returned" sourceRef="Gateway_04o747e" targetRef="Activity_1v5ffpw">
      <bpmn:extensionElements>
        <camunda:executionListener event="take">
          <camunda:script scriptFormat="javascript">execution.setVariable('isAp',true);</camunda:script>
        </camunda:executionListener>
      </bpmn:extensionElements>
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${action == 'Returned'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0kfjdmp" name="Accepted" sourceRef="Gateway_04o747e" targetRef="Activity_1ao3zkj">
      <bpmn:extensionElements>
        <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.FormSubmissionListener" event="take" />
      </bpmn:extensionElements>
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${action == 'Accepted'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0bz8atu" sourceRef="Activity_08ykdar" targetRef="Gateway_0oobb3z">
      <bpmn:extensionElements />
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0b418rv" sourceRef="Activity_1uc1xs1" targetRef="Gateway_04o747e" />
    <bpmn:exclusiveGateway id="Gateway_15p5urd" name="Action Taken">
      <bpmn:incoming>Flow_0d8ruax</bpmn:incoming>
      <bpmn:outgoing>Flow_0gb2oz2</bpmn:outgoing>
      <bpmn:outgoing>Flow_0qw9o9a</bpmn:outgoing>
      <bpmn:outgoing>Flow_0pzpbn7</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_0d8ruax" sourceRef="Activity_1ao3zkj" targetRef="Gateway_15p5urd" />
    <bpmn:sequenceFlow id="Flow_0gb2oz2" name="Accepted" sourceRef="Gateway_15p5urd" targetRef="Activity_08ykdar">
      <bpmn:extensionElements>
        <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.FormSubmissionListener" event="take" />
      </bpmn:extensionElements>
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${action == 'Accepted'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0qw9o9a" name="Returned" sourceRef="Gateway_15p5urd" targetRef="Activity_1v5ffpw">
      <bpmn:extensionElements>
        <camunda:executionListener event="take">
          <camunda:script scriptFormat="javascript">execution.setVariable('isSociety',true);</camunda:script>
        </camunda:executionListener>
      </bpmn:extensionElements>
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${action == 'Returned'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:exclusiveGateway id="Gateway_04o747e" name="Action Taken">
      <bpmn:incoming>Flow_0b418rv</bpmn:incoming>
      <bpmn:outgoing>Flow_12uv3km</bpmn:outgoing>
      <bpmn:outgoing>Flow_0kfjdmp</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:userTask id="Activity_1uc1xs1" name="Validate Bundle" camunda:candidateGroups="formsflow/formsflow-reviewer/csap">
      <bpmn:extensionElements>
        <camunda:taskListener event="complete">
          <camunda:script scriptFormat="javascript">task.execution.setVariable('applicationStatus', task.execution.getVariable('action'));
task.execution.setVariable('deleteReason', "completed");</camunda:script>
        </camunda:taskListener>
        <camunda:taskListener class="org.camunda.bpm.extension.hooks.listeners.ApplicationStateListener" event="complete" />
        <camunda:taskListener class="org.camunda.bpm.extension.hooks.listeners.BPMFormDataPipelineListener" event="complete">
          <camunda:field name="fields">
            <camunda:expression>["applicationId", "applicationStatus"]</camunda:expression>
          </camunda:field>
        </camunda:taskListener>
        <camunda:taskListener event="create">
          <camunda:script scriptFormat="javascript">task.execution.setVariable('isAp',false);</camunda:script>
        </camunda:taskListener>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_142lsgk</bpmn:incoming>
      <bpmn:incoming>Flow_0pzpbn7</bpmn:incoming>
      <bpmn:incoming>Flow_0527h3y</bpmn:incoming>
      <bpmn:outgoing>Flow_0b418rv</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:userTask id="Activity_08ykdar" name="Validate Bundle" camunda:candidateGroups="formsflow/formsflow-reviewer/cssa-team">
      <bpmn:extensionElements>
        <camunda:taskListener event="create">
          <camunda:script scriptFormat="javascript">task.execution.setVariable('isCssaTeam',false);</camunda:script>
        </camunda:taskListener>
        <camunda:taskListener event="complete">
          <camunda:script scriptFormat="javascript">task.execution.setVariable('applicationStatus', task.execution.getVariable('action'));
task.execution.setVariable('deleteReason', "completed");</camunda:script>
        </camunda:taskListener>
        <camunda:taskListener class="org.camunda.bpm.extension.hooks.listeners.ApplicationStateListener" event="complete" />
        <camunda:taskListener class="org.camunda.bpm.extension.hooks.listeners.BPMFormDataPipelineListener" event="complete">
          <camunda:field name="fields">
            <camunda:expression>["applicationId", "applicationStatus"]</camunda:expression>
          </camunda:field>
        </camunda:taskListener>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1quswsc</bpmn:incoming>
      <bpmn:incoming>Flow_0gb2oz2</bpmn:incoming>
      <bpmn:incoming>Flow_0wr0mei</bpmn:incoming>
      <bpmn:outgoing>Flow_0bz8atu</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:exclusiveGateway id="Gateway_0oobb3z" name="Action Taken">
      <bpmn:incoming>Flow_0bz8atu</bpmn:incoming>
      <bpmn:outgoing>Flow_19ktqsm</bpmn:outgoing>
      <bpmn:outgoing>Flow_0drs8s9</bpmn:outgoing>
      <bpmn:outgoing>Flow_0qbjx6e</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:parallelGateway id="Gateway_0uf75ow">
      <bpmn:incoming>Flow_0drs8s9</bpmn:incoming>
      <bpmn:outgoing>Flow_0doe9r5</bpmn:outgoing>
      <bpmn:outgoing>Flow_12948vs</bpmn:outgoing>
    </bpmn:parallelGateway>
    <bpmn:callActivity id="Activity_0vkc1zi" name="CSSA Flow" calledElement="cssa-workflow">
      <bpmn:extensionElements>
        <camunda:in businessKey="#{execution.processBusinessKey}" />
        <camunda:in variables="all" />
        <camunda:out variables="all" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0doe9r5</bpmn:incoming>
      <bpmn:outgoing>Flow_0mfw34y</bpmn:outgoing>
    </bpmn:callActivity>
    <bpmn:callActivity id="Activity_1mo5nko" name="SRCR Flow" calledElement="srcr-workflow">
      <bpmn:extensionElements>
        <camunda:in businessKey="#{execution.processBusinessKey}" />
        <camunda:in variables="all" />
        <camunda:out variables="all" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_12948vs</bpmn:incoming>
      <bpmn:outgoing>Flow_0nv59tm</bpmn:outgoing>
    </bpmn:callActivity>
    <bpmn:sequenceFlow id="Flow_0doe9r5" sourceRef="Gateway_0uf75ow" targetRef="Activity_0vkc1zi">
      <bpmn:extensionElements />
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_12948vs" sourceRef="Gateway_0uf75ow" targetRef="Activity_1mo5nko">
      <bpmn:extensionElements />
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0pzpbn7" name="Recheck" sourceRef="Gateway_15p5urd" targetRef="Activity_1uc1xs1">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${action == 'Recheck'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:receiveTask id="Activity_1v5ffpw" name="Application Resubmitted" messageRef="Message_0lm44we">
      <bpmn:extensionElements>
        <camunda:executionListener event="start">
          <camunda:script scriptFormat="javascript">execution.setVariable('applicationStatus', "Resubmit");
execution.setVariable('returnedBy', "cssaTeam");</camunda:script>
        </camunda:executionListener>
        <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.FormSubmissionListener" event="start" />
        <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.BPMFormDataPipelineListener" event="start">
          <camunda:field name="fields">
            <camunda:expression>["applicationId", "applicationStatus"]</camunda:expression>
          </camunda:field>
        </camunda:executionListener>
        <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.ApplicationStateListener" event="start" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_19ktqsm</bpmn:incoming>
      <bpmn:incoming>Flow_12uv3km</bpmn:incoming>
      <bpmn:incoming>Flow_0qw9o9a</bpmn:incoming>
      <bpmn:outgoing>Flow_1stifo9</bpmn:outgoing>
    </bpmn:receiveTask>
    <bpmn:userTask id="Activity_1ao3zkj" name="Validate Bundle" camunda:candidateGroups="formsflow/formsflow-reviewer/csap-society">
      <bpmn:extensionElements>
        <camunda:taskListener event="complete">
          <camunda:script scriptFormat="javascript">task.execution.setVariable('applicationStatus', task.execution.getVariable('action'));
task.execution.setVariable('deleteReason', "completed");

var system = java.lang.System;
task.execution.setVariable('isSentFromSociety',true);
system.out.println ("isSentFromSociety "+ task.execution.getVariable('isSentFromSociety'));</camunda:script>
        </camunda:taskListener>
        <camunda:taskListener class="org.camunda.bpm.extension.hooks.listeners.ApplicationStateListener" event="complete" />
        <camunda:taskListener class="org.camunda.bpm.extension.hooks.listeners.BPMFormDataPipelineListener" event="complete">
          <camunda:field name="fields">
            <camunda:expression>["applicationId", "applicationStatus"]</camunda:expression>
          </camunda:field>
        </camunda:taskListener>
        <camunda:taskListener event="create">
          <camunda:script scriptFormat="javascript">task.execution.setVariable('isSociety',false);</camunda:script>
        </camunda:taskListener>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0kfjdmp</bpmn:incoming>
      <bpmn:incoming>Flow_0543g25</bpmn:incoming>
      <bpmn:outgoing>Flow_0d8ruax</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="Flow_0mfw34y" name="CSSA Status" sourceRef="Activity_0vkc1zi" targetRef="Gateway_1o5uudb">
      <bpmn:extensionElements />
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0527h3y" name="Yes" sourceRef="Gateway_17raw62" targetRef="Activity_1uc1xs1">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${applicationStatus== 'Resubmitted' and isAp== true}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0543g25" sourceRef="Gateway_17raw62" targetRef="Activity_1ao3zkj">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${applicationStatus== 'Resubmitted' and isSociety== true}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0wr0mei" sourceRef="Gateway_17raw62" targetRef="Activity_08ykdar">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${applicationStatus== 'Resubmitted' and isCssaTeam== true}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:exclusiveGateway id="Gateway_08cgufe" name="Direct to Ministry">
      <bpmn:incoming>Flow_1xj96i6</bpmn:incoming>
      <bpmn:outgoing>Flow_1quswsc</bpmn:outgoing>
      <bpmn:outgoing>Flow_142lsgk</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:parallelGateway id="Gateway_1o5uudb" name="Final Outcome">
      <bpmn:incoming>Flow_0mfw34y</bpmn:incoming>
      <bpmn:incoming>Flow_0nv59tm</bpmn:incoming>
      <bpmn:outgoing>Flow_0xt0zzz</bpmn:outgoing>
    </bpmn:parallelGateway>
    <bpmn:sequenceFlow id="Flow_0nv59tm" name="SRCR Status" sourceRef="Activity_1mo5nko" targetRef="Gateway_1o5uudb">
      <bpmn:extensionElements />
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0xt0zzz" name="Approved/Rejected" sourceRef="Gateway_1o5uudb" targetRef="Activity_0p4hm8r">
      <bpmn:extensionElements>
        <camunda:executionListener event="take">
          <camunda:script scriptFormat="javascript">execution.setVariable('formUrl', execution.getVariable('cssaFormUrl'));</camunda:script>
        </camunda:executionListener>
        <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.CombineSubmissionBundleListener" event="take" />
        <camunda:executionListener event="take">
          <camunda:script scriptFormat="javascript">execution.setVariable('bundleUrl', execution.getVariable('formUrl'));
execution.setVariable('formUrl', execution.getVariable('srcrFormUrl'));</camunda:script>
        </camunda:executionListener>
        <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.CombineSubmissionBundleListener" event="take" />
        <camunda:executionListener event="take">
          <camunda:script scriptFormat="javascript">if (execution.getVariable('cssaStatus') === "Approved" &amp;&amp; execution.getVariable('srcrStatus') === "Approved" )
{
execution.setVariable("applicationStatus", "Approved");
}
else{
execution.setVariable("applicationStatus", "Rejected");
}</camunda:script>
        </camunda:executionListener>
        <camunda:executionListener class="org.camunda.bpm.extension.hooks.listeners.ApplicationStateListener" event="take" />
      </bpmn:extensionElements>
    </bpmn:sequenceFlow>
    <bpmn:callActivity id="Activity_0p4hm8r" name="Send Email Notifications" calledElement="common-email-workflow">
      <bpmn:extensionElements>
        <camunda:in businessKey="#{execution.processBusinessKey}" />
        <camunda:in variables="all" />
        <camunda:out variables="all" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0xt0zzz</bpmn:incoming>
      <bpmn:incoming>Flow_0qbjx6e</bpmn:incoming>
      <bpmn:outgoing>Flow_0izwlc1</bpmn:outgoing>
    </bpmn:callActivity>
    <bpmn:endEvent id="Event_0sdygwc" name="End">
      <bpmn:incoming>Flow_0izwlc1</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_0izwlc1" sourceRef="Activity_0p4hm8r" targetRef="Event_0sdygwc" />
  </bpmn:process>
  <bpmn:message id="Message_1ngb2eg" name="application_resubmitted" />
  <bpmn:message id="Message_0lm44we" name="application_resubmitted" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_14e80c3">
      <bpmndi:BPMNShape id="Participant_1tv1lnj_di" bpmnElement="Participant_1tv1lnj" isHorizontal="true">
        <dc:Bounds x="160" y="80" width="1160" height="1860" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_0t984kw_di" bpmnElement="Lane_0t984kw" isHorizontal="true">
        <dc:Bounds x="190" y="80" width="1130" height="390" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_0bf59ja_di" bpmnElement="Lane_0bf59ja" isHorizontal="true">
        <dc:Bounds x="190" y="470" width="1130" height="290" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_1eegye4_di" bpmnElement="Lane_1eegye4" isHorizontal="true">
        <dc:Bounds x="190" y="1060" width="1130" height="300" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_1i2r1qv_di" bpmnElement="Lane_1i2r1qv" isHorizontal="true">
        <dc:Bounds x="190" y="760" width="1130" height="300" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_0kmo9n9_di" bpmnElement="Lane_0kmo9n9" isHorizontal="true">
        <dc:Bounds x="190" y="1360" width="1130" height="580" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_11v8of2" bpmnElement="StartEvent_1">
        <dc:Bounds x="252" y="182" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="239" y="145" width="61" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1aypuh4_di" bpmnElement="Activity_0k6ixqm">
        <dc:Bounds x="340" y="160" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0zk5qh7" bpmnElement="Activity_1ozfgid">
        <dc:Bounds x="480" y="160" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_17raw62_di" bpmnElement="Gateway_17raw62" isMarkerVisible="true">
        <dc:Bounds x="505" y="285" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="565" y="296" width="66" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1ms3fob" bpmnElement="Gateway_15p5urd" isMarkerVisible="true">
        <dc:Bounds x="765" y="935" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="808" y="913" width="63" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_16ozakt" bpmnElement="Gateway_04o747e" isMarkerVisible="true">
        <dc:Bounds x="765" y="635" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="717.5" y="613" width="63" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1i9xilv" bpmnElement="Activity_1uc1xs1">
        <dc:Bounds x="740" y="500" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_01ekw8c" bpmnElement="Activity_08ykdar">
        <dc:Bounds x="740" y="1100" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0zxsxgz" bpmnElement="Gateway_0oobb3z" isMarkerVisible="true">
        <dc:Bounds x="765" y="1255" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="718" y="1243" width="63" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0snwzvr" bpmnElement="Gateway_0uf75ow">
        <dc:Bounds x="765" y="1405" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1x22c8g_di" bpmnElement="Activity_0vkc1zi">
        <dc:Bounds x="570" y="1490" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0hntdfc" bpmnElement="Activity_1mo5nko">
        <dc:Bounds x="920" y="1490" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1ryxkpv" bpmnElement="Activity_1v5ffpw">
        <dc:Bounds x="740" y="160" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1wjoo3j" bpmnElement="Activity_1ao3zkj">
        <dc:Bounds x="740" y="800" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_08cgufe_di" bpmnElement="Gateway_08cgufe" isMarkerVisible="true">
        <dc:Bounds x="505" y="395" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="419" y="413" width="82" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_053lwo7_di" bpmnElement="Gateway_1o5uudb">
        <dc:Bounds x="775" y="1635" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="764" y="1611" width="72" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1gyq5e4_di" bpmnElement="Activity_0p4hm8r">
        <dc:Bounds x="750" y="1780" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0sdygwc_di" bpmnElement="Event_0sdygwc">
        <dc:Bounds x="1062" y="1802" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1070" y="1848" width="20" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_0c2a61u" bpmnElement="Flow_0drs8s9">
        <di:waypoint x="790" y="1305" />
        <di:waypoint x="790" y="1405" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="797" y="1324" width="46" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1xj96i6_di" bpmnElement="Flow_1xj96i6">
        <di:waypoint x="530" y="335" />
        <di:waypoint x="530" y="395" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="532" y="351" width="15" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_04vwdbt" bpmnElement="Flow_19ktqsm">
        <di:waypoint x="815" y="1280" />
        <di:waypoint x="1140" y="1280" />
        <di:waypoint x="1140" y="200" />
        <di:waypoint x="840" y="200" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="955" y="1263" width="46" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0qbjx6e_di" bpmnElement="Flow_0qbjx6e">
        <di:waypoint x="765" y="1280" />
        <di:waypoint x="340" y="1280" />
        <di:waypoint x="340" y="1820" />
        <di:waypoint x="750" y="1820" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="618" y="1263" width="44" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_16ijchz" bpmnElement="Flow_1stifo9">
        <di:waypoint x="740" y="200" />
        <di:waypoint x="580" y="200" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="631" y="182" width="63" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_10gqhxz" bpmnElement="Flow_1rc30l8">
        <di:waypoint x="288" y="200" />
        <di:waypoint x="340" y="200" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0dbqph3_di" bpmnElement="Flow_0dbqph3">
        <di:waypoint x="440" y="200" />
        <di:waypoint x="480" y="200" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_05pndkl_di" bpmnElement="Flow_05pndkl">
        <di:waypoint x="530" y="240" />
        <di:waypoint x="530" y="285" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1quswsc_di" bpmnElement="Flow_1quswsc">
        <di:waypoint x="530" y="445" />
        <di:waypoint x="530" y="1140" />
        <di:waypoint x="740" y="1140" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="501" y="453" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_142lsgk_di" bpmnElement="Flow_142lsgk">
        <di:waypoint x="555" y="420" />
        <di:waypoint x="790" y="420" />
        <di:waypoint x="790" y="500" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="666" y="402" width="15" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_12uv3km_di" bpmnElement="Flow_12uv3km">
        <di:waypoint x="815" y="660" />
        <di:waypoint x="1140" y="660" />
        <di:waypoint x="1140" y="200" />
        <di:waypoint x="840" y="200" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="955" y="642" width="46" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0kfjdmp_di" bpmnElement="Flow_0kfjdmp">
        <di:waypoint x="790" y="685" />
        <di:waypoint x="790" y="800" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="797" y="706" width="46" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_1gsmghp" bpmnElement="Flow_0bz8atu">
        <di:waypoint x="790" y="1180" />
        <di:waypoint x="790" y="1255" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0b418rv_di" bpmnElement="Flow_0b418rv">
        <di:waypoint x="790" y="580" />
        <di:waypoint x="790" y="635" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0d8ruax_di" bpmnElement="Flow_0d8ruax">
        <di:waypoint x="790" y="880" />
        <di:waypoint x="790" y="935" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0gb2oz2_di" bpmnElement="Flow_0gb2oz2">
        <di:waypoint x="790" y="985" />
        <di:waypoint x="790" y="1100" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="797" y="1000" width="46" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0qw9o9a_di" bpmnElement="Flow_0qw9o9a">
        <di:waypoint x="815" y="960" />
        <di:waypoint x="1140" y="960" />
        <di:waypoint x="1140" y="200" />
        <di:waypoint x="840" y="200" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="970" y="933" width="46" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0doe9r5_di" bpmnElement="Flow_0doe9r5">
        <di:waypoint x="765" y="1430" />
        <di:waypoint x="620" y="1430" />
        <di:waypoint x="620" y="1490" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_12948vs_di" bpmnElement="Flow_12948vs">
        <di:waypoint x="815" y="1430" />
        <di:waypoint x="970" y="1430" />
        <di:waypoint x="970" y="1490" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0pzpbn7_di" bpmnElement="Flow_0pzpbn7">
        <di:waypoint x="765" y="960" />
        <di:waypoint x="640" y="960" />
        <di:waypoint x="640" y="540" />
        <di:waypoint x="740" y="540" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="658" y="943" width="44" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0mfw34y_di" bpmnElement="Flow_0mfw34y">
        <di:waypoint x="620" y="1570" />
        <di:waypoint x="620" y="1660" />
        <di:waypoint x="775" y="1660" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="548" y="1611" width="64" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0527h3y_di" bpmnElement="Flow_0527h3y">
        <di:waypoint x="505" y="310" />
        <di:waypoint x="340" y="310" />
        <di:waypoint x="340" y="540" />
        <di:waypoint x="740" y="540" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="431" y="293" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0543g25_di" bpmnElement="Flow_0543g25">
        <di:waypoint x="505" y="310" />
        <di:waypoint x="340" y="310" />
        <di:waypoint x="340" y="840" />
        <di:waypoint x="740" y="840" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0wr0mei_di" bpmnElement="Flow_0wr0mei">
        <di:waypoint x="505" y="310" />
        <di:waypoint x="340" y="310" />
        <di:waypoint x="340" y="1140" />
        <di:waypoint x="740" y="1140" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0nv59tm_di" bpmnElement="Flow_0nv59tm">
        <di:waypoint x="970" y="1570" />
        <di:waypoint x="970" y="1660" />
        <di:waypoint x="825" y="1660" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="977" y="1611" width="66" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0xt0zzz_di" bpmnElement="Flow_0xt0zzz">
        <di:waypoint x="800" y="1685" />
        <di:waypoint x="800" y="1780" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="699" y="1716" width="82" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0izwlc1_di" bpmnElement="Flow_0izwlc1">
        <di:waypoint x="850" y="1820" />
        <di:waypoint x="1062" y="1820" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
